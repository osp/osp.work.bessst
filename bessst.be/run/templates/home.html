{% extends "base.html" %}

{% block title %}bessst.be â€” home{% endblock %}

{% block slug %}home{% endblock%}

{% block content %}
{% endblock %}

{% block background %}
    {% for axis in object_list reversed %}
        <img class="background-image axis-image" id="background-{{ axis.name|slugify }}" src="{{ axis.image_set.all.0.image.url }}" />
    {% endfor %}
{% endblock %}

{% block footer %}
    <div id="caption-block">
        <div id="caption-list">
                <div class="caption visible">
                    {{ object_list.0.image_set.all.0 }}
                </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script>
        var photos = {
        	_i : 1,
        	axes: [
					{% for axis in object_list %}
					    { 'slug' : '{{ axis.name|slugify }}',
					     'name' : '{{ axis.name }}',
					     'photo' : '{{ axis.image_set.all.0.image.url }}',
					     'photoCaption' : '{{ axis.image_set.all.0 }}' },
					{% endfor %}
					],
            get_axis : function() {
                if (this._i >= this.axes.length) {
                    this._i = 0;
                }
                var axis = this.axes[this._i];
                this._i += 1;
                return axis
            },
	        slide: function(){
	            // background image and caption
	            var axis = this.get_axis();
	            $('img.background-image').not('img#background-' + axis.slug).fadeOut();
	            $('img#background-' + axis.slug).fadeIn();
	
	            console.log('img#background-' + axis.slug);
	            $("footer .caption").text(axis.photoCaption).show();
	        }
        }
    
        $(window).load(function() {
            window.setInterval(function() { photos.slide(); }, 3000);
        });

    </script>
{% endblock %}
