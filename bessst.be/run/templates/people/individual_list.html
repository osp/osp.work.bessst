{% extends "base.html" %}
{% load markup %}

{% block title %}Community{% endblock %}

{% block slug %}community{% endblock %}


{% block content %}
    
    <h2>Stiltepartners</h2>
    <ul> 
        {#{% regroup object_list|dictsort:'individual.individual_set' by individual_set as partner_list %}#}
        {% for organization in partners %}
            <li>
                {{ organization.get_full_name }}
                <ul class='inline member-list'>
                {% for member in organization.individuals.all %}
                    <li>{{ member }}</li>
                {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>
    <ul>
        {% for individual in object_list %}
            {% if not individual.individual_set.all %}
                <li>{{ individual }}
            {% endif %}
        {% endfor %}
    </ul>
    
    
    <h2>Opgeven als stiltevriend</h2>
    <form action="/community/" method="post">{% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit" />
    </form>
    
{% endblock %}


{% block extra_js %}
<script>
    //$(".glossarium").click(function() {
    //    var popover = $('<div class="popover" />');
    //    popover.html($(this).attr('title'));
    //    popover.click(function(){
    //        $(this).remove()
    //    })
    //    
    //    popover.insertAfter($(this))
    //    popover.css('position','absolute')
    //})

    $(window).load(function(){
        {% if object.slug == "over" %}
            $("a#menu-over").addClass('selected');
        {% elif object.slug == "community" %}
            $("a#menu-community").addClass('selected');
        {% endif %}
        // Make seperate boxes for the different elements
        $("h2").each(function(i) {
            // for each header, take the header and all the elements up to the next header
            // and wrap them in a .box div
            $(this).css("cursor", "pointer").add($(this).nextUntil("h2")).wrapAll($('<div class="box"></div>'))
            // for each header, take the next element and all the elements up to the next header
            // and wrap them in a .collapsed div
            $(this).next().add($(this).next().nextUntil("h2")).wrapAll($('<div class="collapsed"></div>'))
        }) 
        $("h2").click(function(){
            $(this).next().slideToggle("slow");
        });

        // applies "Tailing/Queue de lampe" filter
        $(".tail").tailing();

    });
</script>
{% endblock %}


