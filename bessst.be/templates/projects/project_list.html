{% extends "base.html" %}

{% block title %}Projecten{% endblock %}

{% block header %}
    <h1 id="info-zone">&nbsp;</h1>
{% endblock header%}

{% block content %}

    <section id="main">
        <ul id="project-list">
        {% for project in object_list %}
            <li class="box {{ project.axis.name|slugify }}"><a href="{{ project.get_absolute_url }}" data-axis="{{ project.axis.name }}">{{ project }}</a></li>
        {% endfor %} 
        </ul>
    {% include "pictos.html" %}
    </section>


    <script>
        /* Working around a pesky bug in jQuery; embedded svg objects do not receive click events 
         * Therefere we add a span to the containing element.
         * The CSS is as such: 
            .logo .drag {
                position: absolute;
                width: 100%;
                height: 100%;
            }
         * So the span covers all the element and receives the click event
         */
        $(".logo").each(function() {
            $(this).prepend('<span class="drag">&nbsp;</span>')
        })
        
        /* Show axis names on axis-image rollover */
        $("li.logo").hover(function(){
            $("#info-zone").text($(this).children("object").attr('title')).css('visibility','visible')
        }, function(){
            $("#info-zone").html("&nbsp;").css('visibility','hidden')
        });
        
        /* Show/hide projects on axis-image click */
        $("li.logo").click(function(){
            $('.' + $(this).children("object").attr('id')).toggle('slow')
        })
    </script>
{% endblock %}
